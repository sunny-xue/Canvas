<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>GlobalCompositeOperation</title>
	<style type="text/css">
		#buttons{widht:1200px;margin:10px auto;clear:both;}
		#buttons a{font-size: 18px;display: block;float: left;margin-right: 14px;}
	</style>
</head>
<body>
	<canvas id='canvas' style='margin:50px auto;display:block;' width='1200px' height='800px'>
		你的浏览器不支持Canvas...
	</canvas>
	<div id="buttons">
		<a href="#">source-over</a>
		<a href="#">source-atop</a>
		<a href="#">source-in</a>
		<a href="#">source-out</a>
		<a href="#">destination-over</a>
		<a href="#">destination-atop</a>
		<a href="#">destination-in</a>
		<a href="#">destination-out</a>
		<a href="#">lighter</a>
		<a href="#">copy</a>
		<a href="#">xor</a>
	</div>
	<script type="text/javascript">
		window.onload = function() {
			draw('source-over');

			var buttons = document.getElementById('buttons').getElementsByTagName('a');
			for (var i = 0; i < buttons.length; i++) {
				buttons[i].onclick=function() {
					draw(this.text);
					return false;
				};
			}
		};

		function draw (compositeStyle) {
			var canvas = document.getElementById('canvas');
			var ctx = canvas.getContext('2d');

			ctx.clearRect(0,0,canvas.width,canvas.height);
			//draw title 
			ctx.font = 'bold 40px Arial';
			ctx.textAlign = 'center';
			ctx.textBaseline = 'middle';
			ctx.fillStyle = '#058';
			ctx.fillText('GlobalCompositeOperation = ' + compositeStyle, canvas.width/2, 60);
			//draw a rect
			ctx.fillStyle = 'blue';
			ctx.fillRect(300,150,500,500);

			//draw a triangle
			ctx.globalCompositeOperation = compositeStyle;
			ctx.fillStyle = 'red';
			ctx.beginPath();
			ctx.moveTo(700,250);
			ctx.lineTo(1000,750);
			ctx.lineTo(400,750);
			ctx.closePath();
			ctx.fill();
		}
	</script>
</body>
</html>